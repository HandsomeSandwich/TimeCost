{% extends "base.html" %}
{% block title %}Tap{% endblock %}

{% block content %}
<div class="page">
  <header class="page-header">
    <h1>Tap</h1>
    <p class="muted">Quick entry. Minimal thinking.</p>
  </header>

  <form method="POST" action="{{ url_for('piggybank.kiosk_home') }}" class="stack">
    <section class="panel">
      <div class="grid-2">
        <div class="field">
          <label for="amount">Amount ({{ currency }})</label>
          <input
            id="amount"
            name="amount"
            type="number"
            step="0.01"
            inputmode="decimal"
            placeholder="0.00"
            required
            autofocus
          >
          <p class="help">Just the number is enough.</p>
        </div>

        <div class="field">
          <label for="category">Category</label>
          <select id="category" name="category">
            {% for c in ["Other","Discretionary","Rent","Utilities","Savings"] %}
              <option value="{{ c }}" {% if (category|default("Other")) == c %}selected{% endif %}>{{ c }}</option>
            {% endfor %}
          </select>
          <p class="help">Optional. Pick if it helps.</p>
        </div>
      </div>

      <div class="field">
        <label for="note">Note (optional)</label>
        <input id="note" name="note" type="text" placeholder="Coffee, train, etc.">
      </div>

      <div class="actions">
        <button type="submit" class="btn btn-primary">Save</button>
        <a class="btn" href="{{ url_for('piggybank.kiosk_home') }}">Back</a>
      </div>
    </section>

    {% if last_saved %}
      <section class="panel" aria-live="polite">
        <h2 class="card-title">Saved</h2>
        <p style="margin:0;">
          <strong>{{ currency }}{{ last_saved.amount }}</strong>
          {% if last_saved.note %}<span class="muted"> · {{ last_saved.note }}</span>{% endif %}
          <span class="muted"> · {{ last_saved.category }}</span>
        </p>
      </section>
    {% endif %}
  </form>
</div>
{% endblock %}
